'use strict';$(function(){var currentPage=1;var hideAllPages=function(){$("#page-landing, #page-faq, #page-account, #page-direct, #page-multi, #loader").hide()};var toggleLoader=function(s){$("#loader").toggle();if(s!=""){$("#loader > img").attr("src","img/loader-"+s+".png")}};var showLoader=function(s){$("#loader").show();if(s!=""){$("#loader > img").attr("src","img/loader-"+s+".png")}};var hideLoader=function(){$("#loader").hide()};var showAccountPage=function(){hideAllPages();switch(currentPage){case 1:showDirectPage();break;case 2:showMultiPage();break}
$("#page-header, #page-account").show()};var showDirectPage=function(){$("#page-multi").hide();$("#page-header, #page-direct").show();currentPage=1};var showMultiPage=function(){$("#page-direct").hide();$("#page-header, #page-multi").show();currentPage=2};var hideConnectBtn=function(){$("#btnConnect").hide()};var showConnectBtn=function(){$("#btnConnect").show()};var hideRegBtn=function(){$("#btnReg, #btnVerify").hide()};var showRegBtn=function(){$("#btnReg").hide();$("#btnVerify").show()};var showHowBtn=function(){$("#btnHow").show()};var hideHowBtn=function(){$("#btnHow").hide()};hideRegBtn();hideAllPages();$("#page-landing").show();$("#btnLogout").on("click",function(e){Cookies.set('ref',"");showLoader("wait");setTimeout(function(){top.location.href=top.location.origin+top.location.pathname},1500)});$("#btnViewFaq, #btnViewFaqs").on("click",function(e){$("#page-faq").show().css({top:0})});$("#btnViewGuide, #btnViewGuides").on("click",function(e){$("#page-guide").show().css({top:0})});$("#faqButtonClose, #btnJoinNow").on("click",function(e){$("#page-faq").css({top:"100%"});setTimeout(function(){$("#page-faq").hide()},1000)});$("#guideButtonClose").on("click",function(e){$("#page-guide").css({top:"100%"});setTimeout(function(){$("#page-guide").hide()},1000)});$("#btnDirectPage").on("click",function(e){currentPage=1;showDirectPage()});$("#btnMultiPage").on("click",function(e){currentPage=2;showMultiPage()});$("#btnAccountPage").on("click",function(e){currentPage=3;showAccountPage()});$("#page-faq > .container > .async_page").load("faq/index.html #page-faq .paper",function(e){$("#page-faq .paper .centered").remove();$("#page-faq .paper hr").remove()});var $direct=$("#page-direct .container");var $multi=$("#page-multi .container");for(var i=0,t,u,p=0.01;i<12;i++){p=p*2;t=$("<div id='direct_level"+(i+1)+"' class='disabled'></div>");u=$("<div id='multi_level"+(i+1)+"' class='disabled'></div>");t.append("<table><tr><td><span id='direct_level"+(i+1)+"_referrer'>&mdash;</span></td><td>&nbsp;</td></tr><tr><td colspan=2><h3>LEVEL "+(i+1)+"</h3></td></tr><tr><td colspan=2><h5>ETH earned: <span id='direct_level"+(i+1)+"_earned'>-</span></h5></td></tr> <tr><td><span id='direct_idOfLevel"+(i+1)+"_1'>&mdash;</span> <span id='direct_idOfLevel"+(i+1)+"_2'>&mdash;</span></td><td><span id='direct_refOfLevel"+(i+1)+"'><img src='img/refresh.png'></span></td></tr></table><span id='direct_level"+(i+1)+"_buy' class='hide'><button id='directBuyBtn_level"+(i+1)+"'>UNLOCK ("+p.toString()+" ETH)</button></span><hr>");u.append("<table><tr><td><span id='multi_level"+(i+1)+"_referrer'>&mdash;</span></td><td>&nbsp;</td></tr><tr><td colspan=2><h3>LEVEL "+(i+1)+"</h3></td></tr><tr><td colspan=2><h5>ETH earned: <span id='multi_level"+(i+1)+"_earned'>-</span></h5></td></tr> <tr><td><span id='multi_idOfLevel"+(i+1)+"_1_1'>&mdash;</span></td><td><span id='multi_idOfLevel"+(i+1)+"_1_2'>&mdash;</span></td></tr> <tr><td><span id='multi_idOfLevel"+(i+1)+"_2_1'>&mdash;</span><span id='multi_idOfLevel"+(i+1)+"_2_2'>&mdash;</span></td><td><span id='multi_idOfLevel"+(i+1)+"_2_3'>&mdash;</span><span id='multi_refOfLevel"+(i+1)+"'><img src='img/refresh.png'></span></td></tr></table><span id='multi_level"+(i+1)+"_buy' class='hide'><button id='multiBuyBtn_level"+(i+1)+"'>UNLOCK ("+p.toString()+" ETH)</button></span><hr>");$direct.append(t);$multi.append(u)}
var isMobile=!1;var hasMetamask=!1;var hasWeb3Wallet=!1;var web3Provider;var summitEthProvider;var summitEthConn;var summitEthContract;var useLocal=!1;if(useLocal&&top.location.origin.indexOf("summit-eth.com")<0){$("body").html("hello world");return}
var summitServer=(useLocal)?"ws://127.0.0.1:8545":"wss://ropsten.infura.io/ws/v3/8d8fc8f952d54c358dad23a1caff3be2";var ethContractAddr=(useLocal)?"0xb4c6113eb5eec093a5bea2414605dbbee5c496c0":"0x9b8Ab16F9755d6Adc707DaE79A486AEAC676D7e2";var defAcc="0x9221E96fa80104162D6f5aaBB6BBDEf27bE5958f";var ethContract;var usrWalletAddress;var userId=0;var currUserID=2;var userObj;var referrer;var referrerShort;var referrerAddress;var requiresFreeRef=!1;var TOKEN_DECIMALS=1e18;var currentETHbalance=0;var userWalletEnabled=!1;var canPlay=!0;var registrationBtnOpen=!1;var levelPrice=[]
levelPrice[0]=new BigNumber(20000000000000000);for(let c=1;c<12;c++){levelPrice[c]=new BigNumber(levelPrice[c-1]).times(2)}
var gasPrice=350;var direct_matrix_friends_by_level=new Array(12);var direct_matrix_reinvests_by_level=new Array(12);var direct_matrix_missed_by_level=new Array(12);var direct_matrix_extra_by_level=new Array(12);var multi_matrix_friends_by_level=new Array(12);var multi_matrix_reinvests_by_level=new Array(12);var multi_matrix_missed_by_level=new Array(12);var multi_matrix_extra_by_level=new Array(12);var direct_earnings_by_level=new Array(12);var multi_earnings_by_level=new Array(12);var totalEarnings=new BigNumber(0);for(let c=0;c<12;c++){direct_matrix_friends_by_level[c]=[];multi_matrix_friends_by_level[c]=[];direct_matrix_reinvests_by_level[c]=[];multi_matrix_reinvests_by_level[c]=[];direct_matrix_missed_by_level[c]=[];multi_matrix_missed_by_level[c]=[];direct_matrix_extra_by_level[c]=[];multi_matrix_extra_by_level[c]=[]
direct_earnings_by_level[c]=new BigNumber(0);multi_earnings_by_level[c]=new BigNumber(0)}
var isMobileCheck=window.matchMedia("only screen and (pointer:coarse)");if(isMobileCheck.matches){isMobile=!0}
const isMetaMaskInstalled=()=>{const{ethereum}=window;return Boolean(ethereum&&ethereum.isMetaMask)};const onClickConnect=async()=>{try{showLoader("wallet");if(ethereum.enable){try{await ethereum.enable();userWalletEnabled=!0;beginSetup()}catch(e){}}else if(window.web3){userWalletEnabled=!0;beginSetup()}else{beginSetup()}}catch(error){hideLoader();console.error(error)}};setupRates();getGasPrices();var readonlyEnv=!1;setupReadOnlyWeb3(function(){readonlyEnv=!0});function setupReadOnlyWeb3(_callback){summitEthProvider=new Web3.providers.WebsocketProvider(summitServer);summitEthProvider.on('connect',function(e){summitEthConn=new Web3(summitEthProvider);summitEthContract=new summitEthConn.eth.Contract(summitAbi.abi,ethContractAddr);getSummitStats();if(_callback)
_callback();setTimeout(function(){},2000)});summitEthProvider.on('error',function(e){reconnectProvider(0)});summitEthProvider.on('end',function(e){reconnectProvider(0)})}
function reconnectProvider(_tries){try{console.log("ws restarting...");summitEthProvider=new Web3.providers.WebsocketProvider(summitServer);summitEthProvider.on('connect',function(){console.log('WSS Reconnected');summitEthConn=new Web3(summitEthProvider);summitEthContract=new summitEthConn.eth.Contract(summitAbi.abi,ethContractAddr)});summitEthProvider.on('error',function(e){console.log('ws reconnect error',e);reconnectProvider(_tries++)});summitEthProvider.on('end',function(e){console.log('ws reconnect end',e);reconnectProvider(_tries++)})}catch(e){console.log(e);_tries++;if(_tries<20){setTimeout(function(){reconnectProvider(_tries)},500)}else{}}}
function getSummitStats(){;summitEthContract.methods.totalShares().call(function(_err,_result){if(!_err){let _totalEth=new BigNumber(_result);let _btc=_totalEth.div(TOKEN_DECIMALS).div(new BigNumber(exchange_btc_eth));let _usd=_btc.times(exchange_btc_usd);console.log("TotalETH: "+_totalEth.div(TOKEN_DECIMALS).toFixed(8));console.log("TotalBTC: "+_btc.toFixed(8));console.log("TotalUSD: $"+_usd.toFixed(2))}});setTimeout(function(){getSummitStats()},15000)}
function beginSetup(){web3Provider=new Web3(window.web3.currentProvider);checkNetwork(startSystem)}
var _newReferrer=getUrlParameter('ref')||"";if(_newReferrer.length>0){referrer=_newReferrer}else{var _cookieRef=Cookies.get('ref')||"";if(_cookieRef.length>0)
referrer=_cookieRef}
Cookies.set('ref',referrer,{expires:60});console.log("REF:",referrer);if(referrer)
referrerShort=referrer.substring(0,20)+"...";hasMetamask=isMetaMaskInstalled();if(hasMetamask){hasWeb3Wallet=!0}else{if(window.web3){ethereum=window.web3;hasWeb3Wallet=!0}}
if(hasWeb3Wallet){showConnectBtn();hideHowBtn()}else{showHowBtn();hideConnectBtn();hideRegBtn()}
console.log("hasWeb3Wallet:",hasWeb3Wallet);console.log("isMetaMaskInstalled:",isMetaMaskInstalled());setupButtons();function checkNetwork(_callback){web3Provider.eth.net.getNetworkType(function(err,res){ethContract=new web3Provider.eth.Contract(summitAbi.abi,ethContractAddr);if(_callback)
_callback()})}
function startSystem(){if(isMobile){setTimeout(function(){mainEntry()},1000)}else{mainEntry()}
function mainEntry(){if(!readonlyEnv){setupReadOnlyWeb3(function(){getUserWalletAddress(function(){setupUser()})})}else{getUserWalletAddress(function(){setupUser()})}}}
function getUserWalletAddress(_callback){web3Provider.eth.getCoinbase((err,res)=>{var output="";if(!err){output=res;usrWalletAddress=output;$('#inpInviteUrl').val(top.location.origin+top.location.pathname+"?ref="+output);$('#btnConnect').addClass('hide');ethContract.methods.users(usrWalletAddress).call({from:usrWalletAddress},function(_err,_result){if(_result.id>0){userObj=_result;showUser(_result)}else{hideLoader();$('#regDiv').removeClass('hide');showRegBtn();if(isAddress(referrer)&&referrer.toUpperCase()!=usrWalletAddress.toUpperCase()){$('#inpReferrer').val(referrer)}else{referrer=defAcc;$('#inpReferrer').val("");Cookies.set('ref',referrer,{expires:60})}}});if(output){if(_callback)
_callback()}else{canPlay=!1;notLoggedInMsg()}}else{output="Error";notLoggedInMsg();canPlay=!1}})}
function populateEarnings(level){ethContract.methods.userEarnings(usrWalletAddress,level).call(function(_err,_result){if(!_err){direct_earnings_by_level[Number(level-1)]=new BigNumber(_result.directMatrixEarnings);multi_earnings_by_level[Number(level-1)]=new BigNumber(_result.multiMatrixEarnings);totalEarnings=totalEarnings.plus(new BigNumber(_result.directMatrixEarnings));totalEarnings=totalEarnings.plus(new BigNumber(_result.multiMatrixEarnings));$('#direct_level'+level+'_earned').html(direct_earnings_by_level[Number(level-1)].div(TOKEN_DECIMALS).toFixed(8));$('#multi_level'+level+'_earned').html(multi_earnings_by_level[Number(level-1)].div(TOKEN_DECIMALS).toFixed(8));if(level<13){populateEarnings(level+1)}else{let _btc=totalEarnings.div(TOKEN_DECIMALS).div(new BigNumber(exchange_btc_eth));let _usd=_btc.times(exchange_btc_usd);$('#inpMatrixEarnings').val(_usd.toFixed(2));$('#inpMatrixEarnings_ETH').val(totalEarnings.div(TOKEN_DECIMALS).toFixed(8)+" ETH")}}})}
function setupUser(_callback){console.log("CHECKING USER...");populateEarnings(1);populateDirectLevels(1)}
function populateDirectLevels(level){ethContract.methods.usersActiveDirectLevels(usrWalletAddress,level).call(function(_err,_result){console.log("populateDirectLevels:",_result);if(_result==!0){$('#direct_level'+level+'_stats').removeClass('hide');$('#direct_level'+level+'_buy').removeClass('hide');$('#direct_level'+level+'_buy').addClass('hide');$('#direct_level'+level).removeClass('hide');$('#direct_level'+level).removeClass('disabled');ethContract.methods.usersDirectMatrix(usrWalletAddress,level).call(function(_err,_results){ethContract.methods.users(_results[0]).call(function(_err,_result){if(!_err){var t=Number(_result.id);if(t==1&&userId>20)t=Math.round((userId+level)/2+(userId/7)+(level*2));$('#direct_level'+level+'_referrer').html(t+117);$('#direct_level'+level+'_referrer').attr("title","Current Referrer ID:"+(t+117))}});if(_results[2]==!0){$('#direct_level'+level).addClass('disabled');toastMessage("Level "+level+" is blocked for invites until you unlock the next level!","Upgrade needed",30000)}
for(let c=0;c<_results[1].length;c++){ethContract.methods.users(_results[1][c]).call(function(_err,_result){$('#direct_idOfLevel'+level+'_'+Number(c+1)).html(Number(_result.id)+117);$('#direct_idOfLevel'+level+'_'+Number(c+1)).attr("title","Friend ID:"+_result.id+","+" Addr:"+_results[1][c])})}
if(level<13)
populateDirectLevels(level+1);else populateMultiLevels(1)})}else{$('#direct_level'+level).removeClass('hide');$('#direct_level'+level).removeClass('disabled');$('#direct_level'+level).addClass('disabled');$('#direct_level'+level+'_stats').removeClass('hide');$('#direct_level'+level+'_stats').addClass('hide');$('#direct_level'+level+'_buy').removeClass('hide');for(let c=Number(level+1);c<13;c++){$('#direct_level'+c).removeClass('hide');$('#direct_level'+c).removeClass('disabled');$('#direct_level'+c).addClass('disabled');$('#direct_level'+c).addClass('hide')}
populateMultiLevels(1)}})}
function populateMultiLevels(level){ethContract.methods.usersActiveMultiLevels(usrWalletAddress,level).call(function(_err,_result){console.log("populateMultiLevels:",_result);if(_result==!0){$('#multi_level'+level+'_stats').removeClass('hide');$('#multi_level'+level+'_buy').removeClass('hide');$('#multi_level'+level+'_buy').addClass('hide');$('#multi_level'+level).removeClass('disabled');$('#multi_level'+level).removeClass('hide');ethContract.methods.usersMultiMatrix(usrWalletAddress,level).call(function(_err,_results){ethContract.methods.users(_results[0]).call(function(_err,_result){if(!_err){var t=Number(_result.id);if(t==1&&userId>20)t=Math.round((userId+level)/2+(userId/7)+(level*2));$('#multi_level'+level+'_referrer').html(t+117);$('#multi_level'+level+'_referrer').attr("title","Current Referrer ID:"+(t+117))}});if(_results[3]==!0){$('#multi_level'+level).addClass('disabled');toastMessage("Level "+level+" is blocked for invites until you unlock the next level!","Upgrade needed",30000)}
for(let c=0;c<_results[1].length;c++){ethContract.methods.users(_results[1][c]).call(function(_err,_result){$('#multi_idOfLevel'+level+'_1_'+Number(c+1)).html(Number(_result.id)+117);$('#multi_idOfLevel'+level+'_1_'+Number(c+1)).attr("title","Friend ID:"+_result.id+","+" Addr:"+_results[1][c])})}
for(let c=0;c<_results[2].length;c++){ethContract.methods.users(_results[2][c]).call(function(_err,_result){$('#multi_idOfLevel'+level+'_2_'+Number(c+1)).html(Number(_result.id)+117);$('#multi_idOfLevel'+level+'_2_'+Number(c+1)).attr("title","Friend ID:"+_result.id+","+" Addr:"+_results[2][c])})}
if(level<13)
populateMultiLevels(level+1)})}else{$('#multi_level'+level).removeClass('hide');$('#multi_level'+level).removeClass('disabled');$('#multi_level'+level).addClass('disabled');$('#multi_level'+level+'_stats').removeClass('hide');$('#multi_level'+level+'_stats').addClass('hide');$('#multi_level'+level+'_buy').removeClass('hide');for(let c=Number(level+1);c<13;c++){$('#multi_level'+c).removeClass('disabled');$('#multi_level'+c).removeClass('hide');$('#multi_level'+c).addClass('disabled');$('#multi_level'+c).addClass('hide')}}})}
function openContract(){var win=window.open("https://etherscan.io/address/"+ethContractAddr,'_blank');win.focus()}
function openGuide(){var win=window.open("https://summit-eth.com/guide",'_blank');win.focus()}
var exchange_btc_eth=0;var exchange_btc_usd=0;function setupRates(){$.ajax({type:'GET',url:'https://api.coinbase.com/v2/exchange-rates?currency=BTC',data:{get_param:'value'},dataType:'json',success:function(data){exchange_btc_eth=data.data.rates.ETH;exchange_btc_usd=data.data.rates.USD;$("#infBTC").html(data.data.rates.USD)}});$.ajax({type:'GET',url:'https://api.coinbase.com/v2/exchange-rates?currency=ETH',data:{get_param:'value'},dataType:'json',success:function(data){$("#infETH").html(data.data.rates.USD)}});setTimeout(setupRates,30000)}
function getGasPrices(){$.ajax({type:'GET',url:'https://ethgasstation.info/json/ethgasAPI.json',data:{get_param:'value'},dataType:'json',success:function(data){console.log("GAS PRICES:",data,data.fast,data.fastest,data.average);gasPrice=data.fast/10}})}
function calcActiveDays(){const oneDay=24*60*60*1000;const firstDate=new Date(2020,5,15);const secondDate=new Date();const diffDays=Math.round(Math.abs((firstDate-secondDate)/oneDay));console.log("ACTIVE DAYS:",diffDays);if(diffDays>1)
$('#activeDays').html(Number(diffDays-1)+" days");else $('#activeDays').html(Number(diffDays-1)+" day")}
function withdraw(){ethContract.methods.claimShares().estimateGas({from:usrWalletAddress},function(_err,_gasAmount){if(_err){console.log(_err);toastMessage("An error occured sending your transaction - please ensure you have enough gas and try again","Tx Failed",15000);return}else{showLoader("wait");ethContract.methods.claimShares().send({from:usrWalletAddress,gasPrice:gweiTowei(gasPrice),gas:_gasAmount},function(_err,result){if(_err){hideLoader();toastMessage("An error occured with the transaction.","Tx Failed",15000);return}else{hideLoader();$('#inpShareAmount').val("0.00000000 ETH");toastMessage("Shares will be sent to your wallet shortly!","Withdrawing Shares",30000)}})}})}
function reg(){showLoader("wallet");console.log("REG:",referrer,levelPrice[0].times(2).toString());ethContract.methods.users(referrer).call(function(_err,_result){let _referrerExists=!0;if(!_err){_referrerExists=!0}else{if(_result.id==0)
_referrerExists=!1}
if(!_referrerExists)
referrer=defAcc;Cookies.set('ref',referrer,{expires:60});ethContract.methods.registrationExt(referrer).estimateGas({from:usrWalletAddress,value:levelPrice[0].times(2)},function(_err,_gasAmount){if(_err){console.log(_err);toastMessage("An error occured sending your transaction - please ensure you have enough funds and try again","Error with transaction",15000);return}else{showLoader("reg");ethContract.methods.registrationExt(referrer).send({from:usrWalletAddress,value:levelPrice[0].times(2),gasPrice:gweiTowei(gasPrice),gas:_gasAmount},function(_err,result){if(_err){hideLoader();toastMessage("An error occured sending your transaction - please ensure you have enough funds and try again","Error with transaction",15000);return}else{toastMessage("Receiving registration fee..");userChecks=0;checkUserComplete()}})}})})}
function buyLvl(matrix,level){ethContract.methods.buyNewLevel(matrix,level).estimateGas({from:usrWalletAddress,value:levelPrice[level-1]},function(_err,_gasAmount){if(_err){console.log(_err);toastMessage("An error occured sending your transaction - please ensure you have enough funds and try again","Error with transaction",15000);return}else{showLoader("wait");ethContract.methods.buyNewLevel(matrix,level).send({from:usrWalletAddress,value:levelPrice[level-1],gasPrice:gweiTowei(gasPrice),gas:_gasAmount},function(_err,result){if(_err){hideLoader();toastMessage("An error occured sending your transaction - please ensure you have enough funds and try again","Error with transaction",15000);return}else{toastMessage("Level successfully unlocked!");buyChecks=0;levelChecking=level;matrixChecking=matrix;checkBuyComplete()}})}})}
var buyChecks=0;var levelChecking=0;var matrixChecking=0;function checkBuyComplete(){console.log("CHECK BUY COMPLETE:",buyChecks);if(matrixChecking==1){ethContract.methods.usersActiveDirectLevels(usrWalletAddress,levelChecking).call(function(_err,_result){if(_result==!0){toastMessage("Level sucessfully unlocked!");setTimeout(function(){showUser(_result);setupUser();hideLoader()},1500)}else{if(buyChecks<500){setTimeout(function(){buyChecks++;checkBuyComplete()},1500)}else{hideLoader();toastMessage("An error occured checking your transaction - please refresh the page to check confirmation","Error with transaction",15000)}}})}else{ethContract.methods.usersActiveMultiLevels(usrWalletAddress,levelChecking).call(function(_err,_result){if(_result==!0){setTimeout(function(){showUser(_result);setupUser();hideLoader()},1500)}else{if(buyChecks<500){setTimeout(function(){buyChecks++;checkBuyComplete()},1500)}else{hideLoader();toastMessage("An error occured checking your transaction - please refresh the page to check confirmation","Error with transaction",15000)}}})}}
var userChecks=0;function checkUserComplete(){console.log("CHECK USER COMPLETE:",userChecks);ethContract.methods.users(usrWalletAddress).call({from:usrWalletAddress},function(_err,_result){if(_result.id>0){toastMessage("Registered successfully!");setTimeout(function(){showUser(_result);setupUser();hideLoader()},1500)}else{if(userChecks<500){setTimeout(function(){userChecks++;checkUserComplete()},1500)}else{toastMessage("An error occured checking your transaction - please refresh the page to check confirmation","Error with transaction",15000)}}})}
var sharesClaimed=new BigNumber(0);var sharesAvail=new BigNumber(0);function showUser(_UserObj){$('#regDiv').addClass('hide');showAccountPage();$('#inpReferrer2').val(_UserObj.referrer);$("#inpUserId").val(Number(_UserObj.id)+117);$("#inpUserAddress").val(usrWalletAddress);sharesClaimed=new BigNumber(_UserObj.sharesClaimed);getShares()}
function getShares(){ethContract.methods.viewShares(usrWalletAddress).call(function(_err,_result){if(!_err){sharesAvail=new BigNumber(_result);ethContract.methods.totalShares().call(function(e,res){console.log(res)});$('#inpShareAmount').val(sharesAvail.div(TOKEN_DECIMALS).toFixed(8)+" ETH")}})}
function openGuide(){var win=window.open("/SummitETH.pdf",'_blank');win.focus()}
function setupButtons(){$('#btnWithdraw').click(function(){if(!canPlay){notLoggedInMsg()}else{withdraw()}});$('#btnHow').click(function(){var win=window.open("http://summit-eth.com/howto",'_blank');win.focus()});$('#btnConnect').click(function(){if(hasWeb3Wallet){onClickConnect()}else{toastMessage("Ethereum wallet not detected!")}});$("#btnCopyInvite").on("click",function(e){copy(document.querySelector("#inpInviteUrl"))});$('#viewContractBtn').click(function(){openContract()});$('#btnReg').click(function(){if(!canPlay){notLoggedInMsg()}else{reg()}});for(let c=2;c<13;c++){$('#directBuyBtn_level'+c).click(function(){if(!canPlay){notLoggedInMsg()}else{buyLvl(1,c)}})}
for(let c=2;c<13;c++){$('#multiBuyBtn_level'+c).click(function(){if(!canPlay){notLoggedInMsg()}else{buyLvl(2,c)}})}
return}
$("#inpReferrer").on("change, input",function(e){if($("#inpReferrer").val()==""){referrer=defAcc;Cookies.set('ref',referrer,{expires:60});$("#btnReg").show();$("#btnVerify").hide()}else{$("#btnReg").hide();$("#btnVerify").show()}});$("#btnVerify").on("click",function(e){var v=$("#inpReferrer").val();if(v==""){referrer=defAcc;Cookies.set('ref',referrer,{expires:60});return}
showLoader("wait");if(is_url(v)){console.log("url ref");if(v.indexOf("ref=0x")>=0){v=v.substr(v.indexOf("ref=0x")+4)}else{hideLoader();referrer=defAcc;Cookies.set('ref',referrer,{expires:60});toastMessage("Invalid referrer!")}}
try{const address=Web3.utils.toChecksumAddress(v)}catch(e){hideLoader();referrer=defAcc;Cookies.set('ref',referrer,{expires:60});toastMessage("Invalid referrer!");return}
if(v.indexOf("0x")>=0){try{ethContract.methods.users(v).call({from:v},function(_err,_result){if(_result.id>0){hideLoader();referrer=v;$('#inpReferrer').val(referrer);Cookies.set('ref',referrer,{expires:60});$("#btnReg").show();$("#btnVerify").hide();toastMessage("Referrer is valid.")}else{hideLoader();referrer=defAcc;Cookies.set('ref',referrer,{expires:60});toastMessage("Referrer is invalid!")}})}catch(e){hideLoader();referrer=defAcc;Cookies.set('ref',referrer,{expires:60});toastMessage("Invalid referrer!");return}}else{hideLoader();referrer=defAcc;Cookies.set('ref',referrer,{expires:60});toastMessage("Invalid referrer!")}});function notLoggedInMsg(){toastMessage("Cannot access Ethereum wallet.","Error")}
function showError(_msg){}
function toastMessage(_msg,_header,_timeout){$.toast({text:_msg,heading:_header||"Summit ETH",showHideTransition:'slide',allowToastClose:!0,hideAfter:_timeout||4000,stack:3,position:'top-center',bgColor:'',textColor:'#ffffff',textAlign:'center',loader:!1,loaderBg:'#9EC600',})}
function copy(element){document.execCommand('copy',!1,element.select());toastMessage("Link copied to your clipboard","Referral Link")}
function getUrlParameter(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?!0:sParameterName[1]}}};function isAddress(address){return(/^(0x){1}[0-9a-fA-F]{40}$/i.test(address))}
function is_url(str){regexp=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;if(regexp.test(str)){return!0}else{return!1}}
function gweiTowei(_in){return(_in*1000000000)}})